<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SimComm • SimComm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SimComm">
<meta property="og:description" content="SimComm">
<meta property="og:image" content="https://ericmarcon.github.io/SimComm/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SimComm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1-3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/SimComm.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/EricMarcon/SimComm/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SimComm</h1>
            <h3 data-toc-skip class="subtitle">A Simulator of
Communities</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/EricMarcon/SimComm/blob/HEAD/vignettes/SimComm.Rmd" class="external-link"><code>vignettes/SimComm.Rmd</code></a></small>
      <div class="hidden name"><code>SimComm.Rmd</code></div>

    </div>

    
    
<p>This is a preliminary version of a package designed to simulate
spatially-explicit communities.</p>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Install the package for <em>R</em> from Github.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"EricMarcon/SimComm"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="demo">Demo<a class="anchor" aria-label="anchor" href="#demo"></a>
</h2>
<p>The package allows running community models represented by a spatial
pattern. The pattern may be a matrix, a grid of points or a point
pattern. To add a new model, an R6 class must be created to describe it.
It must inherit from one of these base classes, depending on the pattern
it relies on:</p>
<ul>
<li>
<code>community_matrixmodel</code> for matrices,</li>
<li>
<code>community_gridmodel</code> for point grids.</li>
</ul>
<div class="section level3">
<h3 id="conways-game-of-life">Conway’s game of life<a class="anchor" aria-label="anchor" href="#conways-game-of-life"></a>
</h3>
<p>The <code>cm_Conway</code> class is such a <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" class="external-link">model</a>.
The community is represented by a logical matrix where each cell is
either occupied or not. An occupied cell survives if its number of
neighbors is in the values of the vector <code>to_survive</code>, 2 or 3
by default. An empty cell gets populated if its number of neighbors is
in the values of the vector <code>to_generate</code>, 3 by default. The
neighborhood may be defined according to <a href="https://en.wikipedia.org/wiki/Von_Neumann_neighborhood" class="external-link">von
Neumann</a> or <a href="https://en.wikipedia.org/wiki/Moore_neighborhood" class="external-link">Moore</a>.
Default is Moore neighborhood of order 1, i.e. the 8 surrounding
cells.</p>
<p>Writing a new model consists of defining its fields (here:
<code>to_survive</code>, <code>to_generate</code> and
<code>neighborhood</code>), its <code>initialize</code> method and a
private method named <code>evolve</code>. The <code>evolve</code>
methode codes for the evolution of each individual of the community at
each step of time. In Conway’s game of life, each occupied cell may
survive or die and each empty cell may come to life or not.</p>
<p>A model is used in two steps. It must first be instantiated through
its <code>new</code> method. Its initial pattern and the timeline to run
it along are the arguments.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ericmarcon.github.io/SimComm">"SimComm"</a></span><span class="op">)</span></span>
<span><span class="va">myModel</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/cm_Conway.html">cm_Conway</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="../reference/pattern.html">pm_Conway_blinker</a></span><span class="op">(</span><span class="op">)</span>, timeline <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Several functions allow producing parameterized patterns, see
<code>help(patterns)</code>. The <code><a href="../reference/pattern.html">pm_Conway_blinker()</a></code>
function returns a rectangular pattern designed to oscillate when
evolving.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span><span class="op">$</span><span class="fu">autoplot</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="SimComm_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>Evolution is launched by the <code>run</code> method. The timeline
defines the evolution time: its first value corresponds to the initial
patterns, and the <code>evolve</code> method will be run along all other
values. Animation on screen is allowed by <code>animate = TRUE</code>.
The time between two steps is defined by <code>sleep</code>, in seconds.
If <code>save</code> is set to <code>TRUE</code>, then all patterns are
saved.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span>animate <span class="op">=</span> <span class="cn">FALSE</span>, sleep <span class="op">=</span> <span class="fl">0.1</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Saving patterns allows plotting them at a chosen time:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span></span>
<span><span class="va">p5</span> <span class="op">&lt;-</span> <span class="va">myModel</span><span class="op">$</span><span class="fu">autoplot</span><span class="op">(</span>time <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="va">p6</span> <span class="op">&lt;-</span> <span class="va">myModel</span><span class="op">$</span><span class="fu">autoplot</span><span class="op">(</span>time <span class="op">=</span> <span class="fl">6</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="va">p7</span> <span class="op">&lt;-</span> <span class="va">myModel</span><span class="op">$</span><span class="fu">autoplot</span><span class="op">(</span>time <span class="op">=</span> <span class="fl">7</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"gridExtra"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">p5</span>, <span class="va">p6</span>, <span class="va">p7</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="SimComm_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>The <code>along_time</code> method allows applying a function to all
saved patterns and return its value along time. The number of occupied
cells is constant along the evolution of the model. The <code>sum</code>
function is used to count them:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="va">myModel</span><span class="op">$</span><span class="fu">along_time</span><span class="op">(</span><span class="va">sum</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Time"</span>, y <span class="op">=</span> <span class="st">"Number of living cells"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SimComm_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="a-community-drift-model">A community drift model<a class="anchor" aria-label="anchor" href="#a-community-drift-model"></a>
</h3>
<p>This simple model simulates the loss of diversity in a small
community. The community is a matrix where each cell contains an
individual. Marks are species. At each generation, each individual is
replaced by one of its neighbors</p>
<p>First, initialize the model.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/cm_drift.html">cm_drift</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/pattern.html">pattern_matrix_individuals</a></span><span class="op">(</span>nx <span class="op">=</span> <span class="fl">20</span>, ny <span class="op">=</span> <span class="fl">8</span>, S <span class="op">=</span> <span class="fl">20</span>, Distribution <span class="op">=</span> <span class="st">"lnorm"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">myModel</span><span class="op">$</span><span class="fu">autoplot</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="SimComm_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Choose an evolution time of 1000 steps.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span><span class="op">$</span><span class="va">timeline</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1000</span></span></code></pre></div>
<p>Run the model, save its steps.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span>animate <span class="op">=</span> <span class="cn">FALSE</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Plot the final state.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span><span class="op">$</span><span class="fu">autoplot</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="SimComm_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Plot the evolution of richness.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myModel</span><span class="op">$</span><span class="fu">along_time</span><span class="op">(</span><span class="va">Richness</span>, Correction <span class="op">=</span> <span class="st">"None"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Time"</span>, y <span class="op">=</span> <span class="st">"Number of species"</span><span class="op">)</span></span></code></pre></div>
<p><img src="SimComm_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Eric Marcon, Alain Rousteau.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
